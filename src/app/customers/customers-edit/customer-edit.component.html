<form class="h-100 w-100" (ngSubmit)="onSubmit()" [formGroup]="customerForm">
    <h3>{{'CUSTOMER-EDIT.TITLE' | translate}} : {{name}}</h3>
    <div class="row">
        <div class="col-6">
            <label for="name" >{{'CUSTOMER-EDIT.NAME' | translate}}</label>
            <input type="text" class="form-control" formControlName="name" >
        </div>
        <div class="col-6">
            <label for="taxcode" >{{'CUSTOMER-EDIT.TAXCODE' | translate}}</label>
            <input type="text" class="form-control" formControlName="taxcode">
        </div>
    </div>
    
    <div class="form-group  mb-3">
        <label for="address" >{{'CUSTOMER-EDIT.ADDRESS' | translate}}</label>
        <input type="text" class="form-control" formControlName="address" >
    </div>
    <p-accordion>
        <p-accordionTab header="{{'CUSTOMER-EDIT.CONTACTS' | translate}}" [style]="{padding: 0}">
            <p-table [value]="contactArray" styleClass="p-datatable-striped">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 4rem;"><p-button size="small" [text]="true" icon="pi pi-plus" [rounded]="true" (click)="addNewContact()"></p-button></th>
                        <th>{{"CUSTOMER-EDIT-CONTACTS.NAME" | translate}}</th>
                        <th>{{"CUSTOMER-EDIT-CONTACTS.ROLE" | translate}}</th>
                        <th>{{"CUSTOMER-EDIT-CONTACTS.EMAIL" | translate}}</th>
                        <th>{{"CUSTOMER-EDIT-CONTACTS.MOBILE" | translate}}</th>
                        <th>{{"CUSTOMER-EDIT-CONTACTS.PHONE" | translate}}</th>
                    </tr>
                </ng-template>
                
                <ng-template pTemplate="body" let-contact let-editing="editing">
                    <tr>
                        <td><p-button size="small" [text]="true" icon="pi pi-times" [rounded]="true" ></p-button></td>
                        <td [pEditableColumn]="contact.name" pEditableColumnField="name">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="contact.name" [ngModelOptions]="{standalone: true}" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{ contact.name }}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="contact.role" pEditableColumnField="role">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="contact.role" [ngModelOptions]="{standalone: true}" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{ contact.role }}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="contact.email" pEditableColumnField="email">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="contact.email" [ngModelOptions]="{standalone: true}" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{ contact.email }}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="contact.phone" pEditableColumnField="phone">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="contact.phone" [ngModelOptions]="{standalone: true}" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{ contact.phone }}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                        <td [pEditableColumn]="contact.mobile" pEditableColumnField="mobile">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="contact.mobile" [ngModelOptions]="{standalone: true}" />
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{ contact.mobile }}
                                </ng-template>
                            </p-cellEditor>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </p-accordionTab>
        <p-accordionTab header="{{'CUSTOMER-EDIT.NOTE' | translate}}">
            <div class="form-group">
                <textarea type="text" class="form-control" formControlName="note" ></textarea>
            </div>
        </p-accordionTab>
    </p-accordion>
    
    <div class="row p-2 justify-content-end">
        <div class="col-3">
            <div class="row row-cols-2">
                <p-button class="p-1" icon="pi pi-save" iconPos="left" (click)="save($event)"
                [disabled]="!customerForm.valid || !customerForm.dirty" label="Save">
            </p-button>
            <p-button class="p-1" icon="pi pi-times" iconPos="left" label="Delete"></p-button>
            <p-confirmPopup></p-confirmPopup>
            </div>
        </div>
    </div>
</form>